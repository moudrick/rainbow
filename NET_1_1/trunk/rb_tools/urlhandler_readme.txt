UrlHandler introduced by john.mandia@whitelightsolutions.com additional support from Jes and Manu.
---------------------------------------------------------------------------

My Site: http://www.whitelightsolutions.com
UrlEngine: http://www.gotdotnet.com/Community/Workspaces/Workspace.aspx?id=a69f7838-dda3-47a9-a572-648612211a6e
Rainbow Rules: Available from Rainbow CVS
Rainbow: http://www.rainbowportal.net

Hi All,

The handler engine currently has 2 rules. 

* RewriteRules.Rainbow.DefaultRule
* RewriteRules.Rainbow.LegacyRule

(These rules are available as a seperate project on cvs, the handler engine is at GotDotNet as a workspace:

http://www.gotdotnet.com/Community/Workspaces/Workspace.aspx?id=a69f7838-dda3-47a9-a572-648612211a6e

In Rainbow.config you had the following main settings (there was an xml handler as well but it wasnt finished...I'll be creating a rule for that in the future once it is more flexible):

<add key="HandlerFlag" value="go" />	
<add key="UseAlias" value="true" />
<add key="LangInURL" value="true" />
<add key="HandlerTargetUrl" value="DesktopDefault.aspx" />
<add key="KeywordSplitter" value="false" />

All of these apart from keyword splitter are still used (Keyword splitter is now a legacy method used by the LegacyRule) and I would keep the same values for usealias and langinurl that you had previously (if you change them and a search engine indexed an old url that old url will
no longer work - this is no longer an issue with the new urls built).

There is now a slight change in the way "HandlerFlag" setting is used. 

Before it use to be used by UrlBuilder and by the HttpHandler.

Now "HandlerFlag" is only used by UrlBuilder. The reason I did this was to make it flexible. 

Each rule has it's own entry in web.config and has it's own settings:

E.g. 

<RainbowDefaultRule HandlerFlag="portal"/>
<RainbowLegacyRule HandlerFlag="go" KeywordSplitter="false" />

If your old portal has always had the HandlerFlag as "go" and KeywordSplitter=false then you should make 
the settings in the RainbowLegacyRule Reflect this as above. 

The New default rule has a HandlerFlag setting of "portal" (as an example). If you change the 
Rainbow.Config HandlerFlag setting to "portal" (used by UrlBuilder) all new urls will be caught by the Default Rule.

There is one last thing. There is a new setting in Rainbow.config:

<add key="HandlerDefaultSplitter" value="__" />

This is the splitter that will be in the url generated by UrlBuilder. e.g.

www.mydomain.com/portal/tabID__123/alias__myalias/lang__en/default.aspx

I recommend playing around with the setting and picking a favourite one to use on your portals. 
I do not recommend using a single _ as filenames use a single _ or - and you dont want to confuse the handler. 
Experiment and find one that suits you (This should be a constant setting as once it has been indexed by 
search engines it can cause problems down the road if you change the default splitter).

For Module developers there is a new way to pass additional attributes:

Before:

* sports1234/news123/golf32 - Using Jes' Keyword Splitter

Or

* sports=1234&news=123&golf=32 (default method)

the keyword splitter method was fine if you only wanted to pass numeric values, the default way caused 
problems with UrlScan (and I have heard .Net 1.1).

New method:

* sports=1234/news=123/golf=32

I have added support for the standard default method  e.g sports=1234&news=123&golf=32 gets transformed 
into the new version.....so the shopping cart now works even with UrlScan. 

I would prefer if everyone would start using the new method though ;-)

Anyway, I hope that lets everyone know more or less what the new Handler is about.

Regards,

John 
